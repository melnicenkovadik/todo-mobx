{"ast":null,"code":"import _objectSpread from \"/Users/vadymmelnychenko/WebstormProjects/test-task/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\n\nvar _jsxFileName = \"/Users/vadymmelnychenko/WebstormProjects/test-task/src/context/stores-context.tsx\",\n    _s = $RefreshSig$(),\n    _this = this,\n    _s2 = $RefreshSig$();\n\nimport { createContext, useContext } from \"react\";\nimport { useLocalObservable } from \"mobx-react-lite\";\nimport { nanoid } from \"nanoid\";\nimport { toJS } from \"mobx\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport var todoStore = /*#__PURE__*/createContext({});\nexport var useTodoContext = function useTodoContext() {\n  _s();\n\n  return useContext(todoStore);\n};\n\n_s(useTodoContext, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\n\nexport var TodoProvider = function TodoProvider(_ref) {\n  _s2();\n\n  var children = _ref.children;\n  var store = useLocalObservable(function () {\n    var _localStorage$getItem;\n\n    return {\n      filter: (_localStorage$getItem = localStorage.getItem(\"filter\")) !== null && _localStorage$getItem !== void 0 ? _localStorage$getItem : \"ALL\",\n      todos: localStorage.getItem(\"todos\") ? JSON.parse(localStorage.getItem(\"todos\")) : [{\n        id: nanoid(),\n        title: \"'lala'\",\n        done: false\n      }],\n      addTodo: function addTodo(title) {\n        store.todos.push({\n          id: nanoid(),\n          title: title,\n          done: false\n        });\n        localStorage.setItem(\"todos\", JSON.stringify(store.todos));\n      },\n      removeTodo: function removeTodo(id) {\n        store.todos = store.todos.filter(function (todo) {\n          return todo.id !== id;\n        });\n        localStorage.setItem(\"todos\", JSON.stringify(store.todos));\n      },\n      toggleDone: function toggleDone(id) {\n        store.todos.map(function (todo) {\n          if (todo.id === id) {\n            todo.done = !todo.done;\n          }\n        });\n        localStorage.setItem(\"todos\", JSON.stringify(store.todos));\n      },\n      show: function show(filter) {\n        switch (filter) {\n          case \"ALL\":\n            return toJS(store.todos);\n\n          case \"DONE\":\n            return toJS(store.todos.filter(function (todo) {\n              return todo.done;\n            }));\n\n          default:\n            return toJS(store.todos);\n        }\n      },\n      setFilter: function setFilter(filter) {\n        this.filter = filter;\n        localStorage.setItem(\"filter\", filter);\n      },\n      deleteTodos: function deleteTodos(ids) {\n        var updateTodos = store.todos.filter(function (todo) {\n          return !ids.includes(todo.id);\n        });\n        store.todos = updateTodos;\n        localStorage.setItem(\"todos\", JSON.stringify(updateTodos));\n      },\n      changeStatus: function changeStatus(ids, status, todosArr) {\n        store.todos = todosArr.map(function (todo) {\n          if (ids.includes(todo.id)) {\n            return _objectSpread(_objectSpread({}, todo), {}, {\n              done: status === \"DONE\"\n            });\n          }\n\n          return _objectSpread({}, todo);\n        });\n        localStorage.setItem(\"todos\", JSON.stringify(store.todos));\n      }\n    };\n  });\n  return /*#__PURE__*/_jsxDEV(todoStore.Provider, {\n    value: store,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 104,\n    columnNumber: 10\n  }, _this);\n};\n\n_s2(TodoProvider, \"NZYU4i+03rBPtZ1XCJRg4U/fmOE=\", false, function () {\n  return [useLocalObservable];\n});\n\n_c = TodoProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"TodoProvider\");","map":{"version":3,"names":["createContext","useContext","useLocalObservable","nanoid","toJS","todoStore","useTodoContext","TodoProvider","children","store","filter","localStorage","getItem","todos","JSON","parse","id","title","done","addTodo","push","setItem","stringify","removeTodo","todo","toggleDone","map","show","setFilter","deleteTodos","ids","updateTodos","includes","changeStatus","status","todosArr"],"sources":["/Users/vadymmelnychenko/WebstormProjects/test-task/src/context/stores-context.tsx"],"sourcesContent":["import { createContext, ReactNode, useContext } from \"react\";\nimport { useLocalObservable } from \"mobx-react-lite\";\nimport { nanoid } from \"nanoid\";\nimport { action, toJS } from \"mobx\";\n\nexport const todoStore = createContext({} as ITodoStore);\n\nexport interface ITodo {\n  id: string;\n  title: string;\n  done: boolean;\n}\n\nexport interface ITodoStore {\n  filter: string;\n  todos: ITodo[];\n  addTodo: (title: string) => void;\n  removeTodo: (id: string) => void;\n  toggleDone: (id: string) => void;\n  show: (filter: string) => ITodo[];\n  setFilter: (filter: string) => void;\n  deleteTodos: (ids: string[]) => void;\n  changeStatus: (ids: string[], status: string, todos: ITodo[]) => void;\n}\n\ninterface ITodoProvider {\n  children: ReactNode;\n}\n\nexport const useTodoContext = () => useContext(todoStore);\n\nexport const TodoProvider = ({ children }: ITodoProvider) => {\n  const store: ITodoStore = useLocalObservable(\n    () =>\n      ({\n        filter: localStorage.getItem(\"filter\") ?? \"ALL\",\n        todos: localStorage.getItem(\"todos\")\n          ? JSON.parse(localStorage.getItem(\"todos\")!)\n          : ([\n            {\n              id: nanoid(),\n              title: \"'lala'\",\n              done: false\n            }\n          ] as ITodo[]),\n        addTodo(title: string) {\n          store.todos.push({\n            id: nanoid(),\n            title,\n            done: false\n          });\n          localStorage.setItem(\"todos\", JSON.stringify(store.todos));\n        },\n        removeTodo(id: string) {\n          store.todos = store.todos.filter((todo) => todo.id !== id);\n          localStorage.setItem(\"todos\", JSON.stringify(store.todos));\n        },\n        toggleDone(id: string) {\n          store.todos.map((todo) => {\n            if (todo.id === id) {\n              todo.done = !todo.done;\n            }\n          });\n          localStorage.setItem(\"todos\", JSON.stringify(store.todos));\n        },\n        show(filter: string) {\n          switch (filter) {\n            case \"ALL\":\n              return toJS(store.todos);\n            case \"DONE\":\n              return toJS(store.todos.filter((todo) => todo.done));\n            default:\n              return toJS(store.todos);\n          }\n        },\n        setFilter(filter: string) {\n          this.filter = filter;\n          localStorage.setItem(\"filter\", filter);\n        },\n        deleteTodos(ids: string[]) {\n          const updateTodos = store.todos.filter(\n            (todo) => !ids.includes(todo.id)\n          );\n          store.todos = updateTodos;\n          localStorage.setItem(\"todos\", JSON.stringify(updateTodos));\n        },\n        changeStatus(ids: string[], status: \"DONE\" | \"ACTIVE\", todosArr: ITodo[]) {\n          store.todos = todosArr.map((todo) => {\n            if (ids.includes(todo.id)) {\n              return {\n                ...todo,\n                done: status === \"DONE\"\n              };\n            }\n            return {\n              ...todo\n            };\n          });\n          localStorage.setItem(\"todos\", JSON.stringify(store.todos));\n        }\n      } as ITodoStore)\n  );\n\n  return <todoStore.Provider value={store}>{children}</todoStore.Provider>;\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}