{"ast":null,"code":"import { nanoid } from 'nanoid';\nimport { toJS } from \"mobx\";\nvar todos = localStorage.getItem('todos') ? JSON.parse(localStorage.getItem('todos')) : [{\n  id: nanoid(),\n  title: \"'lala'\",\n  done: false\n}];\nexport var createTodoStore = function createTodoStore() {\n  var _localStorage$getItem;\n\n  return {\n    filter: (_localStorage$getItem = localStorage.getItem('filter')) !== null && _localStorage$getItem !== void 0 ? _localStorage$getItem : 'ALL',\n\n    get todos() {\n      return todos;\n    },\n\n    addTodo: function addTodo(title) {\n      this.todos.push({\n        id: nanoid(),\n        title: title,\n        done: false\n      });\n      this.show(this.filter);\n      localStorage.setItem('todos', JSON.stringify(this.todos));\n    },\n    removeTodo: function removeTodo(id) {\n      this.todos = this.todos.filter(function (todo) {\n        return todo.id !== id;\n      });\n      this.show(this.filter);\n      localStorage.setItem('todos', JSON.stringify(this.todos));\n    },\n    toggleDone: function toggleDone(id) {\n      this.todos.map(function (todo) {\n        if (todo.id === id) {\n          todo.done = !todo.done;\n        }\n      });\n      localStorage.setItem('todos', JSON.stringify(this.todos));\n    },\n    show: function show(filter) {\n      switch (filter) {\n        case \"ALL\":\n          return toJS(this.todos);\n\n        case \"DONE\":\n          return toJS(this.todos.filter(function (todo) {\n            return todo.done;\n          }));\n\n        default:\n          return toJS(this.todos);\n      }\n    },\n    setFilter: function setFilter(filter) {\n      this.filter = filter;\n      localStorage.setItem('filter', filter);\n    },\n    deleteTodos: function deleteTodos(ids) {\n      var updateTodos = this.todos.filter(function (todo) {\n        return !ids.includes(todo.id);\n      });\n      this.todos = updateTodos;\n      localStorage.setItem('todos', JSON.stringify(updateTodos));\n    },\n    changeStatus: function changeStatus(ids, status) {\n      this.todos.map(function (todo) {\n        if (ids.includes(todo.id)) {\n          todo.done = status === 'DONE';\n        }\n\n        return todo;\n      });\n      localStorage.setItem('todos', JSON.stringify(this.todos));\n    }\n  };\n};","map":{"version":3,"names":["nanoid","toJS","todos","localStorage","getItem","JSON","parse","id","title","done","createTodoStore","filter","addTodo","push","show","setItem","stringify","removeTodo","todo","toggleDone","map","setFilter","deleteTodos","ids","updateTodos","includes","changeStatus","status"],"sources":["/Users/vadymmelnychenko/WebstormProjects/test-task/src/stores/todo.store.ts"],"sourcesContent":["import {nanoid} from 'nanoid'\nimport {toJS} from \"mobx\";\n\nexport interface ITodo {\n    id: string;\n    title: string;\n    done: boolean\n}\n\n\nexport interface ITodoStore {\n    filter: string;\n    todos: ITodo[];\n    addTodo: (title: string) => void;\n    removeTodo: (id: string) => void;\n    toggleDone: (id: string) => void;\n    show: (filter: string) => ITodo[];\n    setFilter: (filter: string) => void;\n    deleteTodos: (ids: string[]) => void;\n    changeStatus: (ids: string[], status: string) => void;\n}\n\nconst todos = localStorage.getItem('todos') ? JSON.parse(localStorage.getItem('todos')!) : [{\n    id: nanoid(),\n    title: \"'lala'\",\n    done: false\n},\n] as ITodo[];\nexport const createTodoStore = () => {\n    return {\n        filter: localStorage.getItem('filter') ?? 'ALL',\n        get todos() {\n            return todos;\n        },\n        addTodo(title: string) {\n            this.todos.push({\n                id: nanoid(),\n                title,\n                done: false\n            });\n            this.show(this.filter);\n            localStorage.setItem('todos', JSON.stringify(this.todos))\n        },\n        removeTodo(id: string) {\n            this.todos = this.todos.filter(todo => todo.id !== id);\n            this.show(this.filter);\n            localStorage.setItem('todos', JSON.stringify(this.todos))\n        },\n        toggleDone(id: string) {\n            this.todos.map((todo) => {\n                if (todo.id === id) {\n                    todo.done = !todo.done;\n                }\n            });\n            localStorage.setItem('todos', JSON.stringify(this.todos))\n        },\n        show(filter: string) {\n            switch (filter) {\n                case \"ALL\":\n                    return toJS(this.todos);\n                case \"DONE\":\n                    return toJS(this.todos.filter(todo => todo.done));\n                default:\n                    return toJS(this.todos);\n            }\n        },\n        setFilter(filter: string) {\n            this.filter = filter;\n            localStorage.setItem('filter', filter);\n        },\n        deleteTodos(ids: string[]) {\n            const updateTodos = this.todos.filter(todo => !ids.includes(todo.id));\n            this.todos = updateTodos;\n            localStorage.setItem('todos', JSON.stringify(updateTodos))\n        },\n        changeStatus(ids: string[], status: 'DONE' | 'ACTIVE') {\n            this.todos.map(todo => {\n                if (ids.includes(todo.id)) {\n                    todo.done = status === 'DONE';\n                }\n                return todo;\n            });\n            localStorage.setItem('todos', JSON.stringify(this.todos))\n        }\n    } as ITodoStore;\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}