{"ast":null,"code":"import { nanoid } from 'nanoid';\nexport var FILTER_TYPES;\n\n(function (FILTER_TYPES) {\n  FILTER_TYPES[\"ALL\"] = \"ALL\";\n  FILTER_TYPES[\"DONE\"] = \"DONE\";\n})(FILTER_TYPES || (FILTER_TYPES = {}));\n\nexport var createTodoStore = function createTodoStore() {\n  console.log('dasdsa', localStorage.getItem('filter') === 'DONE' ? FILTER_TYPES.DONE : FILTER_TYPES.ALL);\n  return {\n    filter: localStorage.getItem('filter') === 'DONE' ? FILTER_TYPES.DONE : FILTER_TYPES.ALL,\n    todos: localStorage.getItem('todos') ? JSON.parse(localStorage.getItem('todos')) : [{\n      id: nanoid(),\n      title: \"'lala'\",\n      done: false\n    }],\n    addTodo: function addTodo(title) {\n      this.todos.push({\n        id: nanoid(),\n        title: title,\n        done: false\n      });\n      this.show(this.filter);\n      localStorage.setItem('todos', JSON.stringify(this.todos));\n    },\n    removeTodo: function removeTodo(id) {\n      this.todos = this.todos.filter(function (todo) {\n        return todo.id !== id;\n      });\n      this.show(this.filter);\n      localStorage.setItem('todos', JSON.stringify(this.todos));\n    },\n    toggleDone: function toggleDone(id) {\n      this.todos.map(function (todo) {\n        if (todo.id === id) {\n          todo.done = !todo.done;\n        }\n      });\n      localStorage.setItem('todos', JSON.stringify(this.todos));\n    },\n    show: function show(filter) {\n      localStorage.setItem('filter', filter);\n\n      switch (filter) {\n        case FILTER_TYPES.ALL:\n          return this.todos;\n\n        case FILTER_TYPES.DONE:\n          return this.todos.filter(function (todo) {\n            return todo.done;\n          });\n      }\n    },\n    setFilter: function setFilter(filter) {\n      this.filter = filter === 'DONE' ? FILTER_TYPES.DONE : FILTER_TYPES.ALL;\n      localStorage.setItem('filter', filter);\n    }\n  };\n};","map":{"version":3,"names":["nanoid","FILTER_TYPES","createTodoStore","console","log","localStorage","getItem","DONE","ALL","filter","todos","JSON","parse","id","title","done","addTodo","push","show","setItem","stringify","removeTodo","todo","toggleDone","map","setFilter"],"sources":["/Users/vadymmelnychenko/WebstormProjects/test-task/src/stores/todo.store.ts"],"sourcesContent":["import {nanoid} from 'nanoid'\n\nexport interface ITodo {\n    id: string;\n    title: string;\n    done: boolean\n}\n\nexport enum FILTER_TYPES {\n    ALL = 'ALL',\n    DONE = 'DONE',\n}\n\nexport interface ITodoStore {\n    filter: FILTER_TYPES;\n    todos: ITodo[];\n    addTodo: (title: string) => void;\n    removeTodo: (id: string) => void;\n    toggleDone: (id: string) => void;\n    show: (filter: FILTER_TYPES) => ITodo[];\n    setFilter: (filter: FILTER_TYPES) => void;\n}\n\nexport const createTodoStore = () => {\n    console.log('dasdsa',localStorage.getItem('filter') === 'DONE' ? FILTER_TYPES.DONE : FILTER_TYPES.ALL)\n    return {\n        filter: localStorage.getItem('filter') === 'DONE' ? FILTER_TYPES.DONE : FILTER_TYPES.ALL,\n        todos: localStorage.getItem('todos') ? JSON.parse(localStorage.getItem('todos')!) : [{\n            id: nanoid(),\n            title: \"'lala'\",\n            done: false\n        },\n        ] as ITodo[],\n        addTodo(title: string) {\n            this.todos.push({\n                id: nanoid(),\n                title,\n                done: false\n            });\n            this.show(this.filter);\n            localStorage.setItem('todos', JSON.stringify(this.todos))\n        },\n        removeTodo(id: string) {\n            this.todos = this.todos.filter(todo => todo.id !== id);\n            this.show(this.filter);\n            localStorage.setItem('todos', JSON.stringify(this.todos))\n        },\n        toggleDone(id: string) {\n            this.todos.map((todo) => {\n                if (todo.id === id) {\n                    todo.done = !todo.done;\n                }\n            });\n            localStorage.setItem('todos', JSON.stringify(this.todos))\n        },\n        show(filter: FILTER_TYPES) {\n            localStorage.setItem('filter', filter);\n            switch (filter) {\n                case FILTER_TYPES.ALL:\n                    return this.todos;\n                case FILTER_TYPES.DONE:\n                    return this.todos.filter(todo => todo.done);\n            }\n        },\n        setFilter(filter: FILTER_TYPES) {\n            this.filter = filter === 'DONE' ? FILTER_TYPES.DONE : FILTER_TYPES.ALL;\n            localStorage.setItem('filter', filter);\n        }\n    } as ITodoStore;\n}\n"],"mappings":"AAAA,SAAQA,MAAR,QAAqB,QAArB;AAQA,WAAYC,YAAZ;;WAAYA,Y;EAAAA,Y;EAAAA,Y;GAAAA,Y,KAAAA,Y;;AAeZ,OAAO,IAAMC,eAAe,GAAG,SAAlBA,eAAkB,GAAM;EACjCC,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAqBC,YAAY,CAACC,OAAb,CAAqB,QAArB,MAAmC,MAAnC,GAA4CL,YAAY,CAACM,IAAzD,GAAgEN,YAAY,CAACO,GAAlG;EACA,OAAO;IACHC,MAAM,EAAEJ,YAAY,CAACC,OAAb,CAAqB,QAArB,MAAmC,MAAnC,GAA4CL,YAAY,CAACM,IAAzD,GAAgEN,YAAY,CAACO,GADlF;IAEHE,KAAK,EAAEL,YAAY,CAACC,OAAb,CAAqB,OAArB,IAAgCK,IAAI,CAACC,KAAL,CAAWP,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAX,CAAhC,GAA6E,CAAC;MACjFO,EAAE,EAAEb,MAAM,EADuE;MAEjFc,KAAK,EAAE,QAF0E;MAGjFC,IAAI,EAAE;IAH2E,CAAD,CAFjF;IAQHC,OARG,mBAQKF,KARL,EAQoB;MACnB,KAAKJ,KAAL,CAAWO,IAAX,CAAgB;QACZJ,EAAE,EAAEb,MAAM,EADE;QAEZc,KAAK,EAALA,KAFY;QAGZC,IAAI,EAAE;MAHM,CAAhB;MAKA,KAAKG,IAAL,CAAU,KAAKT,MAAf;MACAJ,YAAY,CAACc,OAAb,CAAqB,OAArB,EAA8BR,IAAI,CAACS,SAAL,CAAe,KAAKV,KAApB,CAA9B;IACH,CAhBE;IAiBHW,UAjBG,sBAiBQR,EAjBR,EAiBoB;MACnB,KAAKH,KAAL,GAAa,KAAKA,KAAL,CAAWD,MAAX,CAAkB,UAAAa,IAAI;QAAA,OAAIA,IAAI,CAACT,EAAL,KAAYA,EAAhB;MAAA,CAAtB,CAAb;MACA,KAAKK,IAAL,CAAU,KAAKT,MAAf;MACAJ,YAAY,CAACc,OAAb,CAAqB,OAArB,EAA8BR,IAAI,CAACS,SAAL,CAAe,KAAKV,KAApB,CAA9B;IACH,CArBE;IAsBHa,UAtBG,sBAsBQV,EAtBR,EAsBoB;MACnB,KAAKH,KAAL,CAAWc,GAAX,CAAe,UAACF,IAAD,EAAU;QACrB,IAAIA,IAAI,CAACT,EAAL,KAAYA,EAAhB,EAAoB;UAChBS,IAAI,CAACP,IAAL,GAAY,CAACO,IAAI,CAACP,IAAlB;QACH;MACJ,CAJD;MAKAV,YAAY,CAACc,OAAb,CAAqB,OAArB,EAA8BR,IAAI,CAACS,SAAL,CAAe,KAAKV,KAApB,CAA9B;IACH,CA7BE;IA8BHQ,IA9BG,gBA8BET,MA9BF,EA8BwB;MACvBJ,YAAY,CAACc,OAAb,CAAqB,QAArB,EAA+BV,MAA/B;;MACA,QAAQA,MAAR;QACI,KAAKR,YAAY,CAACO,GAAlB;UACI,OAAO,KAAKE,KAAZ;;QACJ,KAAKT,YAAY,CAACM,IAAlB;UACI,OAAO,KAAKG,KAAL,CAAWD,MAAX,CAAkB,UAAAa,IAAI;YAAA,OAAIA,IAAI,CAACP,IAAT;UAAA,CAAtB,CAAP;MAJR;IAMH,CAtCE;IAuCHU,SAvCG,qBAuCOhB,MAvCP,EAuC6B;MAC5B,KAAKA,MAAL,GAAcA,MAAM,KAAK,MAAX,GAAoBR,YAAY,CAACM,IAAjC,GAAwCN,YAAY,CAACO,GAAnE;MACAH,YAAY,CAACc,OAAb,CAAqB,QAArB,EAA+BV,MAA/B;IACH;EA1CE,CAAP;AA4CH,CA9CM"},"metadata":{},"sourceType":"module"}