{"ast":null,"code":"import _initializerDefineProperty from \"/Users/vadymmelnychenko/WebstormProjects/test-task/node_modules/@babel/runtime/helpers/esm/initializerDefineProperty.js\";\nimport _createClass from \"/Users/vadymmelnychenko/WebstormProjects/test-task/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _classCallCheck from \"/Users/vadymmelnychenko/WebstormProjects/test-task/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _applyDecoratedDescriptor from \"/Users/vadymmelnychenko/WebstormProjects/test-task/node_modules/@babel/runtime/helpers/esm/applyDecoratedDescriptor.js\";\nimport _initializerWarningHelper from \"/Users/vadymmelnychenko/WebstormProjects/test-task/node_modules/@babel/runtime/helpers/esm/initializerWarningHelper.js\";\n\nvar _class, _descriptor, _descriptor2, _descriptor3, _descriptor4, _descriptor5, _descriptor6, _descriptor7, _descriptor8, _descriptor9;\n\nimport { nanoid } from 'nanoid';\nimport { action, makeObservable, observable, toJS } from 'mobx';\nvar TodoStore = (_class = /*#__PURE__*/_createClass(function TodoStore() {\n  _classCallCheck(this, TodoStore);\n\n  _initializerDefineProperty(this, \"filter\", _descriptor, this);\n\n  _initializerDefineProperty(this, \"todos\", _descriptor2, this);\n\n  _initializerDefineProperty(this, \"addTodo\", _descriptor3, this);\n\n  _initializerDefineProperty(this, \"removeTodo\", _descriptor4, this);\n\n  _initializerDefineProperty(this, \"toggleDone\", _descriptor5, this);\n\n  _initializerDefineProperty(this, \"show\", _descriptor6, this);\n\n  _initializerDefineProperty(this, \"setFilter\", _descriptor7, this);\n\n  _initializerDefineProperty(this, \"deleteTodos\", _descriptor8, this);\n\n  _initializerDefineProperty(this, \"changeStatus\", _descriptor9, this);\n\n  makeObservable(this);\n}), (_descriptor = _applyDecoratedDescriptor(_class.prototype, \"filter\", [observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    var _localStorage$getItem;\n\n    return (_localStorage$getItem = localStorage.getItem('filter')) !== null && _localStorage$getItem !== void 0 ? _localStorage$getItem : 'ALL';\n  }\n}), _descriptor2 = _applyDecoratedDescriptor(_class.prototype, \"todos\", [observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return localStorage.getItem('todos') ? JSON.parse(localStorage.getItem('todos')) : [{\n      id: nanoid(),\n      title: \"'lala'\",\n      done: false\n    }];\n  }\n}), _descriptor3 = _applyDecoratedDescriptor(_class.prototype, \"addTodo\", [action], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    var _this = this;\n\n    return function (title) {\n      _this.todos.push({\n        id: nanoid(),\n        title: title,\n        done: false\n      });\n\n      _this.show(_this.filter);\n\n      localStorage.setItem('todos', JSON.stringify(_this.todos));\n    };\n  }\n}), _descriptor4 = _applyDecoratedDescriptor(_class.prototype, \"removeTodo\", [action], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    var _this2 = this;\n\n    return function (id) {\n      _this2.todos = _this2.todos.filter(function (todo) {\n        return todo.id !== id;\n      });\n\n      _this2.show(_this2.filter);\n\n      localStorage.setItem('todos', JSON.stringify(_this2.todos));\n    };\n  }\n}), _descriptor5 = _applyDecoratedDescriptor(_class.prototype, \"toggleDone\", [action], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    var _this3 = this;\n\n    return function (id) {\n      _this3.todos.map(function (todo) {\n        if (todo.id === id) {\n          todo.done = !todo.done;\n        }\n      });\n\n      localStorage.setItem('todos', JSON.stringify(_this3.todos));\n    };\n  }\n}), _descriptor6 = _applyDecoratedDescriptor(_class.prototype, \"show\", [action], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    var _this4 = this;\n\n    return function (filter) {\n      switch (filter) {\n        case 'ALL':\n          return toJS(_this4.todos);\n\n        case 'DONE':\n          return toJS(_this4.todos.filter(function (todo) {\n            return todo.done;\n          }));\n\n        default:\n          return toJS(_this4.todos);\n      }\n    };\n  }\n}), _descriptor7 = _applyDecoratedDescriptor(_class.prototype, \"setFilter\", [action], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    var _this5 = this;\n\n    return function (filter) {\n      _this5.filter = filter;\n      localStorage.setItem('filter', filter);\n    };\n  }\n}), _descriptor8 = _applyDecoratedDescriptor(_class.prototype, \"deleteTodos\", [action], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    var _this6 = this;\n\n    return function (ids) {\n      var updateTodos = _this6.todos.filter(function (todo) {\n        return !ids.includes(todo.id);\n      });\n\n      _this6.todos = updateTodos;\n      localStorage.setItem('todos', JSON.stringify(updateTodos));\n    };\n  }\n}), _descriptor9 = _applyDecoratedDescriptor(_class.prototype, \"changeStatus\", [action], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    var _this7 = this;\n\n    return function (ids, status) {\n      _this7.todos.map(function (todo) {\n        if (ids.includes(todo.id)) {\n          todo.done = status === 'DONE';\n        }\n\n        return todo;\n      });\n\n      localStorage.setItem('todos', JSON.stringify(_this7.todos));\n    };\n  }\n})), _class);\nvar todoStore = new TodoStore();\nexport default todoStore;","map":{"version":3,"names":["nanoid","action","makeObservable","observable","toJS","TodoStore","localStorage","getItem","JSON","parse","id","title","done","todos","push","show","filter","setItem","stringify","todo","map","ids","updateTodos","includes","status","todoStore"],"sources":["/Users/vadymmelnychenko/WebstormProjects/test-task/src/stores/todo.store.ts"],"sourcesContent":["import {nanoid} from 'nanoid';\nimport {action, makeObservable, observable, toJS} from 'mobx';\n\nexport interface ITodo {\n    id: string;\n    title: string;\n    done: boolean;\n}\n\nexport interface ITodoStore {\n    filter: string;\n    todos: ITodo[];\n    addTodo: (title: string) => void;\n    removeTodo: (id: string) => void;\n    toggleDone: (id: string) => void;\n    show: (filter: string) => ITodo[];\n    setFilter: (filter: string) => void;\n    deleteTodos: (ids: string[]) => void;\n    changeStatus: (ids: string[], status: string) => void;\n}\n\nclass TodoStore implements ITodoStore {\n\n\n    @observable\n    filter: string = localStorage.getItem('filter') ?? 'ALL';\n    @observable todos: ITodo[] = localStorage.getItem('todos')\n        ? JSON.parse(localStorage.getItem('todos')!)\n        : [\n            {\n                id: nanoid(),\n                title: \"'lala'\",\n                done: false,\n            },\n        ];\n\n    constructor() {\n        makeObservable(this);\n    }\n\n    @action addTodo = (title: string) => {\n        this.todos.push({\n            id: nanoid(),\n            title,\n            done: false,\n        });\n        this.show(this.filter);\n        localStorage.setItem('todos', JSON.stringify(this.todos));\n    }\n\n    @action removeTodo = (id: string) => {\n        this.todos = this.todos.filter((todo) => todo.id !== id);\n        this.show(this.filter);\n        localStorage.setItem('todos', JSON.stringify(this.todos));\n    }\n\n    @action toggleDone = (id: string) => {\n        this.todos.map((todo) => {\n            if (todo.id === id) {\n                todo.done = !todo.done;\n            }\n        });\n        localStorage.setItem('todos', JSON.stringify(this.todos));\n    }\n\n    @action show = (filter: string) => {\n        switch (filter) {\n            case 'ALL':\n                return toJS(this.todos);\n            case 'DONE':\n                return toJS(this.todos.filter((todo) => todo.done));\n            default:\n                return toJS(this.todos);\n        }\n    }\n\n    @action setFilter = (filter: string) => {\n        this.filter = filter;\n        localStorage.setItem('filter', filter);\n    }\n\n    @action deleteTodos = (ids: string[]) => {\n        const updateTodos = this.todos.filter((todo) => !ids.includes(todo.id));\n        this.todos = updateTodos;\n        localStorage.setItem('todos', JSON.stringify(updateTodos));\n    }\n\n    @action changeStatus = (ids: string[], status: string): void => {\n        this.todos.map((todo) => {\n            if (ids.includes(todo.id)) {\n                todo.done = status === 'DONE';\n            }\n            return todo;\n        });\n        localStorage.setItem('todos', JSON.stringify(this.todos));\n    }\n}\n\nconst todoStore = new TodoStore();\nexport default todoStore;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}